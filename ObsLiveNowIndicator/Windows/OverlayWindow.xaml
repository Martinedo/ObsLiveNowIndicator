<Window x:Class="ObsLiveNowIndicator.Windows.OverlayWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="OBS Live Indicator Overlay"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Width="80"
        Height="80"
        IsHitTestVisible="False">
    <Window.Resources>
        <!-- Candle-like pulse animation -->
        <Storyboard x:Key="PulseAnimation" RepeatBehavior="Forever">
            <!-- Main pulse on the icon itself - OpacityContainer holds user's opacity setting -->
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LiveIcon" 
                                          Storyboard.TargetProperty="Opacity">
                <LinearDoubleKeyFrame KeyTime="0:0:0" Value="0.7"/>
                <LinearDoubleKeyFrame KeyTime="0:0:0.8" Value="1.0"/>
                <LinearDoubleKeyFrame KeyTime="0:0:1.6" Value="0.7"/>
            </DoubleAnimationUsingKeyFrames>
            
            <!-- Scale pulse -->
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ScaleTransform" 
                                          Storyboard.TargetProperty="ScaleX">
                <LinearDoubleKeyFrame KeyTime="0:0:0" Value="0.95"/>
                <LinearDoubleKeyFrame KeyTime="0:0:0.8" Value="1.05"/>
                <LinearDoubleKeyFrame KeyTime="0:0:1.6" Value="0.95"/>
            </DoubleAnimationUsingKeyFrames>
            
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ScaleTransform" 
                                          Storyboard.TargetProperty="ScaleY">
                <LinearDoubleKeyFrame KeyTime="0:0:0" Value="0.95"/>
                <LinearDoubleKeyFrame KeyTime="0:0:0.8" Value="1.05"/>
                <LinearDoubleKeyFrame KeyTime="0:0:1.6" Value="0.95"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        
        <!-- 4-pointed star path - normalized to 0-100 for scaling -->
        <PathGeometry x:Key="StarGeometry" Figures="M 50,0 L 57,38 L 100,44 L 57,50 L 50,88 L 43,50 L 0,44 L 43,38 Z"/>

        <!-- Circle geometry - normalized -->
        <EllipseGeometry x:Key="CircleGeometry" Center="50,44" RadiusX="40" RadiusY="40"/>

        <!-- Square geometry - normalized -->
        <RectangleGeometry x:Key="SquareGeometry" Rect="5,5,90,80"/>
    </Window.Resources>
    
    <Grid x:Name="OpacityContainer" IsHitTestVisible="False">
        <Viewbox Stretch="Uniform" IsHitTestVisible="False">
            <Grid Width="100" Height="88" IsHitTestVisible="False">
                <Path x:Name="LiveIcon"
                      Fill="#DC143C"
                      Stroke="#8B0000"
                      StrokeThickness="2"
                      Data="{StaticResource StarGeometry}"
                      RenderTransformOrigin="0.5,0.5"
                      IsHitTestVisible="False">
                    <Path.Effect>
                        <DropShadowEffect Color="Red" 
                                        BlurRadius="15" 
                                        ShadowDepth="0" 
                                        Opacity="0.8"/>
                    </Path.Effect>
                    <Path.RenderTransform>
                        <ScaleTransform x:Name="ScaleTransform" ScaleX="1" ScaleY="1"/>
                    </Path.RenderTransform>
                </Path>
            </Grid>
        </Viewbox>
    </Grid>
</Window>
